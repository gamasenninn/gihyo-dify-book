# 番外:Webからナレッジを作成する(0.5)

★★ーー再度テストして微調整ーー★★

公式ドキュメントやマニュアル、技術ブログなど、Web上の情報をチャットボットの知識として活用したいと思ったことありませんか？

このセクションでは、FirecrawlというWebクローラーを使って、それを実現する方法を説明します。

## 1. 準備：Firecrawlの設定

まず、知識を作成するところから始めましょう。

1. 「知識を作成」をクリック
    
    ![Untitled](%E7%95%AA%E5%A4%96%20Web%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B(0%205)%20978c289a283d436889887dee238958d2/Untitled.png)
    
2. データソースの選択で「Webサイトから同期」を選ぶ

![Untitled](%E7%95%AA%E5%A4%96%20Web%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B(0%205)%20978c289a283d436889887dee238958d2/Untitled%201.png)

1. Firecrawlの設定画面が表示される

ここで重要なのが、FirecrawlのAPI登録です。まだ済んでいない方は、別途案内されている手順でAPI Keyを取得してください。

API Keyをお持ちでない場合：

- 設定ボタンをクリック
- Websiteのconfigureをクリック
- 表示された画面でAPI Keyを入力
- 「保存」をクリック
- 設定がアクティブになります

![Untitled](%E7%95%AA%E5%A4%96%20Web%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B(0%205)%20978c289a283d436889887dee238958d2/Untitled%202.png)

![Untitled](%E7%95%AA%E5%A4%96%20Web%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B(0%205)%20978c289a283d436889887dee238958d2/Untitled%203.png)

![Untitled](%E7%95%AA%E5%A4%96%20Web%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B(0%205)%20978c289a283d436889887dee238958d2/Untitled%204.png)

## 2. Webコンテンツの取得

Firecrawlがアクティブになったら、いよいよWebコンテンツの取得です。

1. 読み込みたいURLを入力
2. オプションの設定
    - Crawl sub-pages: サブページも取得するかどうか
    - Limit: 取得するページ数の制限
    - Max depth: クロール深度の制限
    - Exclude/Include paths: 除外/含めるパスの指定
3. 「次へ」ボタンをクリック

![Untitled](%E7%95%AA%E5%A4%96%20Web%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B(0%205)%20978c289a283d436889887dee238958d2/Untitled%205.png)

すると、指定したURLからコンテンツを読み込んできます。取得したページの一覧が表示されるので、必要な項目にチェックを入れましょう。全部取り込みたい場合は「Select All」でOKです。

![Untitled](%E7%95%AA%E5%A4%96%20Web%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B(0%205)%20978c289a283d436889887dee238958d2/Untitled%206.png)

## 3. RAGの設定

コンテンツを選択したら、次はRAG（Retrieval Augmented Generation）の設定です。

1. 検索方法は「ハイブリッド検索」を選択
    - キーワード検索と意味検索のいいとこ取りができる
    - より正確な検索結果が期待できる
2. 再ランキングをONに
    - 検索結果の精度が上がる
    - デフォルトの設定で問題なし
3. トップKは3程度から開始
    - 必要に応じて後から調整可能
4. 「保存して処理」をクリック

![Untitled](%E7%95%AA%E5%A4%96%20Web%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B(0%205)%20978c289a283d436889887dee238958d2/Untitled%207.png)

処理には少し時間がかかりますが、これでWebコンテンツがナレッジとして使える状態になります。

## ちょっとしたコツ

1. URLの選び方
    - メインコンテンツが含まれるページを指定
    - ナビゲーションやヘッダー、フッターは自動的に除外される
2. 取得量の調整
    - 最初は少なめに設定してテスト
    - うまくいったら徐々に増やす
3. 更新頻度
    - Webコンテンツは定期的に更新される
    - ナレッジも適宜更新することをおすすめ

こうして作成したナレッジは、チャットボットの回答の質を大きく向上させます。公式ドキュメントの内容を踏まえた回答や、技術ブログの知見を活かした提案など、より実践的な対話が可能になります。