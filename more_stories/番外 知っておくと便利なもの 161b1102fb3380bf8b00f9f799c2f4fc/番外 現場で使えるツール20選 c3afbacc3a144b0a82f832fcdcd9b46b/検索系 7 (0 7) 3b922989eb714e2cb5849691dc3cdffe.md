# 検索系 7 (0.7)

## 1.Google: 老舗の実力と安定した出力

ツール名:  GoogleSearch

認証:   必要

認証方法:  「取得方法」をクリックし、当該サイトからSerpAPIKeyを取得し、設定します。

機能概要:

- Googleのウェブ検索を実行し、検索結果からスニペット（概要の断片）やページ内容を抽出します。

特徴:

- Googleのサービスだけに安定した検索結果が得られる。
- SerpAPIは無料枠の限界があるので、使い続けるためには課金が必要です。

使いどころ:

- ユーザから入力された質問からWeb検索し、それに関する記事を数件検索しURLと概要を取得する。これを参考にしてLLMが記事を要約あるいは一覧を表示する。または、取得したURLからさらに詳しい内容をスクレイピングする処理につなげる。などの使い方ができる。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%201.png)

使用方法:

チャットフローで説明します。

GoogleSearchのパラメータは下記のとおり、入力変数を渡すだけのシンプルなものです。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%202.png)

パラメータ抽出:

パラメータ抽出を使うことによって曖昧な質問から有効な検索ワードを抽出します。「ツールからインポート」をクリックしてGoogle Searchを選択することで下図のように自動的に抽出変数がセットされます。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%203.png)

LLMの設定:

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%204.png)

テンプレート

ちょっと複雑になりますが、次のようにすることでLLMに向いたテキスト構造ができます。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%205.png)

実行結果:

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%206.png)

## 2.DuckDuckGo: 認証なしで使えるプライバシー特化型検索エンジン

ツール名:  DuckDuckGo Search

認証:   不必要

認証方法:  　なし

機能概要:

- DuckDuckGoのウェブ検索を実行し、検索結果からスニペットやページ内容を抽出します。

特徴:

- DuckDuckGoはプライバー保護に特化したWebサービスのため、検索をトレースされません。
- 検索トップに広告要素がある結果があがってこないため、精度の高い記事が検索できます。
- 認証が不用というのが最も大きな特徴です。
- 右図にあるように、イメージ、ニュース、ビデオなど分野に特化した検索ツールを使用することができます。
- 手軽に利用できるので、著者イチオシの検索エンジンツールです。

使いどころ:

- Googleツールと同様。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%207.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%208.png)

使用方法:

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%209.png)

パラメータ抽出:

パラメータ抽出で曖昧な質問から有効な検索ワードを抽出します。「ツールからインポート」をクリックしてDuckDuckGo Searchを選択します。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2010.png)

LLMの設定

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2011.png)

テンプレート

DuckDuckGoの出力結果であるtextには何も入ってこないので、json部分のデータ主力を利用します。JSONデータをそのままLLMに渡すのはあまりよろしくないため、テンプレートでLLMライクな形式に加工します。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2012.png)

実行結果

「豊臣秀吉の妻の名前といくつかのエピソードを教えて」

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2013.png)

## 3.Wikipedia: 単一ワードにめちゃつよい世界辞書(認証不要)

ツール名:  WikipediaSearch

認証:   不必要

認証方法:  　なし

機能概要:

- Wikipediaの検索を実行し、検索結果からスニペットやページ内容を抽出します。

特徴:

- 誰もが知るWikiPedia。その検索がこのツールでできます。
- 認証が不用というのが最も大きな特徴です。

使いどころ:

- 専門用語や専門知識が必要なときに向いている。キーワードからより詳しい内容を取得しLLMで要約してもらうなどに向いている。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2014.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2015.png)

使用方法

認証なしで使えるので簡単にテストできます。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2016.png)

パラメータ抽出を使うことによって曖昧な質問から有効な検索ワードを抽出します。「ツールからインポート」をクリックしてWikiPedia Searchを選択することで下図のように自動的に抽出変数がセットされます。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2017.png)

WikiPediaは正確さが命ですので、プロンプトには、コンテキストが存在しない場合は存在しなことを明確にユーザに伝えることを指示します。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2018.png)

実行結果

以下のような質問だとWikipediaの場合、正確な回答を戻しません。よってLLMではコンテキストがからになるのでプロンプトの指示どおり「この件に関してコンテキストに存在しません」となります。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2019.png)

このように「織田信長」を単一キーとして検索できる場合はWikipediaの力が最大限に活用できます。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2020.png)

注意点:

また、WikipediaSearchに渡すパラメータは「検索ワード」であり単語単位です。

「徳川家康が行った政治で有名なものを５つあげて」という質問には答えられません。

Wikipwdiaで目的の検索ワードに即した詳細内容を調べたいときに使えるでしょう。

## 4.Tavily AI: あいまいな質問に対してAIがよしなに答えてくれる

ツール名:  Tavily Search

認証:   必要

認証方法:  　「取得方法」をクリックし、当該サイトからTavily API Keyを取得し、設定します。

機能概要:

- Tavilyの検索を実行し、検索結果からスニペットやページ内容を抽出します。

特徴:

- Tavily AIは、あいまいな質問に対してAIがよしなに答えてくれる検索エンジンです。[https://app.tavily.com](https://app.tavily.com/home)
- 検索トップに広告要素がある結果があがってこないため、精度の高い記事が検索できます。
- あいまいな質問をそのまま渡せるため、パラメータ抽出などの前処理がいらない。

使いどころ:

- Googleツールと同様。しかし、検索の方法が多岐にわたるのできめ細かな検索が必要なときに向いている。特にニュースの検索には力を発揮する。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2021.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2022.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2023.png)

使用方法:

Tavily Searchは多くのパラメータがありますが、重要なのは「TOPIC」です。GeneralとNewsがあります。Generalは全般的な検索を行います。通常ならこれでよいでしょう。Newsはニュースに特化した検索のオプションです。興味ふかいのは「DAYS」パラメータです。今日から数日間のニュースを検索します。デフォルトは3。つまり今日と以前の３日間の中のニュースを検索してくれます。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2024.png)

LLMの設定

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2025.png)

実行結果

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2026.png)

その他のパラメータは以下のとおりです。

- 検索深度: 検索結果に表示するページの深さを設定します。
- 画像の表示: 検索結果に画像を表示するかどうかを設定します。
- 回答の表示: 検索結果に回答を表示するかどうかを設定します。
- 生コンテンツの表示: 検索結果に生コンテンツを表示するかどうかを設定します。
- 最大検索結果数: 検索結果に表示するページの最大数を設定します。

## 5.SearXNG:　ローカルで動かせるメタ検索エンジン

ツール名:  SearXNG

認証:   必要

認証方法:  　ローカルで運用する場合は認証は必要ない。ローカルのSerXNGサーバーのURLを指定する。今回の場合はDockerが立ち上がっているマシンに同居されるのでその場合は次のようになります。

http://host.docker.internal:8081

機能概要:

- SearXNGサーバーでの検索を実行し、検索結果からスニペットやページ内容を抽出します。

特徴:

- めちゃめちゃ高機能、かゆいところに手の届くメタサーチエンジン。
オープンソースなので自社でサーバーを立ち上げるとよい。
（サーバーの立ち上げ方は別途説明）
- 
- 

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2027.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2028.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2029.png)

使用方法:

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2030.png)

パラメータ抽出設定

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2031.png)

テンプレート設定

SearXNGの出力結果であるtextには何も入ってこないので、json部分のデータ主力を利用します。JSONデータをそのままLLMに渡すのはあまりよろしくないため、テンプレートでLLMライクな形式に加工します。

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2032.png)

LLM設定

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2033.png)

回答設定

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2034.png)

実行結果:

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2035.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2036.png)

## 6.bing:　マイクロソフト社が提供する高機能な検索エンジン

ツール名:  BingWebSearch

認証:   必要

認証方法:  　「取得方法」をクリックし、当該サイトからBing API Keyを取得し、設定します。

機能概要:

- Bingの検索サーバーで検索を実行し、検索結果からスニペットやページ内容を抽出します。

特徴:

- 安定の検索結果
- 
- 
- 

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2037.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2038.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2039.png)

使用方向:

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2040.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2041.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2042.png)

実行結果:

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2043.png)

## 7.Perplexity: 質問への回答が一発で

ツール名:  Perplexity Search

認証:   必要

認証方法:  　「取得方法」をクリックし、当該サイトからAPI Keyを取得し、設定します。

機能概要:

- Perplexityの検索サーバーで検索を実行し、検索結果からスニペットやページ内容を抽出します。

特徴:

- 安定の検索結果

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2044.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2045.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2046.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2047.png)

使用方法:

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2048.png)

続き:

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2049.png)

LLM設定

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2050.png)

実行結果:

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2051.png)

![image.png](%E6%A4%9C%E7%B4%A2%E7%B3%BB%207%20(0%207)%203b922989eb714e2cb5849691dc3cdffe/image%2052.png)