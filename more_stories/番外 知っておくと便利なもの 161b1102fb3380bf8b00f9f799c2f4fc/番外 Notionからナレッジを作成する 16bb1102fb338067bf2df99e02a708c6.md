# 番外:Notionからナレッジを作成する

Notionって使ってますか？私は結構愛用しているのですが、情報がたまる一方で「あれ、このデータどこいったっけ？」なんてことありませんか？実はDifyには、そんなNotionのデータを知識ベースとして活用できる機能があるのです。

ここではローカルだ立ち上げたDifyとNotionとの連携方法を説明します。

## なぜNotionと連携するの？

Notionはメモ帳としても、プロジェクト管理ツールとしても、はたまたナレッジベースとしても使える万能選手です。日々の業務やプロジェクトの情報が自然と集まってくる場所でもあります。

そんなNotionのデータを、Difyのナレッジベースとして使えたら...？

そう、DifyとNotionを連携させることで、あなたのNotionに眠る情報を、AIアプリで活用できるようになるんです。例えば：

- 社内のナレッジベースとして使っているNotionの内容をAIが参照可能に
- プロジェクト情報をAIが理解して回答
- 蓄積した技術メモをAIが分析して答えを提供

## 連携の仕方

さて、実際の連携作業に入りましょう。ローカル環境でDifyを動かしている場合、少しだけ工夫が必要です。

### 1. Notionのキーを取得

まずはNotionのインテグレーションキーを取得します。

1. [https://www.notion.so/profile/integrations](https://www.notion.so/profile/integrations)のページにアクセス
2. 「新しいインテグレーション」をクリック

    
    ![image.png](%E7%95%AA%E5%A4%96%20Notion%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%2016bb1102fb338067bf2df99e02a708c6/image.png)
    
3. インテグレーションの名前を入力します。今回は「Dify連携用」としておきます。
4. 関連ワークスペースを入力
5. 種類:内部を選択
6. 「保存」をクリックします。インテグレーション画面に戻るとDify連携用というインテグレーションが追加されています。

    
    ![image.png](%E7%95%AA%E5%A4%96%20Notion%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%2016bb1102fb338067bf2df99e02a708c6/image%201.png)
    

![image.png](%E7%95%AA%E5%A4%96%20Notion%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%2016bb1102fb338067bf2df99e02a708c6/image%202.png)

### 2. Docker環境での設定

ローカル環境の場合、設定は.envもしくは`docker-compose.yaml`に直接書き込む必要があります。

```yaml
  NOTION_INTEGRATION_TYPE=internal
  NOTION_INTERNAL_SECRET=あなたのキー
```

このあと、以下のコマンドで再起動します：

```bash
docker compose down
docker compose up -d
```

### 3. Notion側の設定

次は、Notion側での設定です。

1. Notionで連携したいページを開きます。右上の「…」をクリックしてください。

![image.png](%E7%95%AA%E5%A4%96%20Notion%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%2016bb1102fb338067bf2df99e02a708c6/image%203.png)

右上の「...」をクリックします。「接続」をクリックします。メニューが開きますので、先ほど作成したインテグレーション「Dify連携用」を選択します。

![image.png](%E7%95%AA%E5%A4%96%20Notion%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%2016bb1102fb338067bf2df99e02a708c6/image%204.png)

次のようにアクセスの確認を聞いてきますので「はい」をクリックします。

![image.png](%E7%95%AA%E5%A4%96%20Notion%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%2016bb1102fb338067bf2df99e02a708c6/image%205.png)

これで、DifyからNotionのデータが見えるようになります。

### 4. Difyでデータを取り込む

あとは、Difyの「ナレッジ」から「Notionから同期」を選べば、連携したページのデータを取り込めます。

ダッシュボード→ナレッジ→「ナレッジを作成」をクリック。

![image.png](%E7%95%AA%E5%A4%96%20Notion%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%2016bb1102fb338067bf2df99e02a708c6/image%206.png)

データソースの選択が表示されます。

Notionからの同期を選択すると先程登録した記事が一覧で表示されます。必要な記事を選んで次へをクリックします。

![image.png](%E7%95%AA%E5%A4%96%20Notion%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%2016bb1102fb338067bf2df99e02a708c6/image%207.png)

![image.png](%E7%95%AA%E5%A4%96%20Notion%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%2016bb1102fb338067bf2df99e02a708c6/image%208.png)

あとはいつもどおりの設定画面ですので必要な設定をして「保存して処理」をクリックします。

![image.png](%E7%95%AA%E5%A4%96%20Notion%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%2016bb1102fb338067bf2df99e02a708c6/image%209.png)

ナレッジが作成されました。「ドキュメントに移動」をクリックします。

![image.png](%E7%95%AA%E5%A4%96%20Notion%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%2016bb1102fb338067bf2df99e02a708c6/image%2010.png)

ドキュメント一覧が表示されます。クリックすると詳細が確認できます。これでドキュメントが作成されました。

![image.png](%E7%95%AA%E5%A4%96%20Notion%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%2016bb1102fb338067bf2df99e02a708c6/image%2011.png)

![image.png](%E7%95%AA%E5%A4%96%20Notion%E3%81%8B%E3%82%89%E3%83%8A%E3%83%AC%E3%83%83%E3%82%B7%E3%82%99%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%2016bb1102fb338067bf2df99e02a708c6/image%2012.png)

すでにNotionで情報を管理している方は、ぜひDifyとの連携を試してみてください。新しい可能性が開けるはずです。